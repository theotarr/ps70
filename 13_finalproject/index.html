<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PS70 — Final Project</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link href="../dist/output.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark-dimmed.min.css"
    />
    <link rel="icon" href="../favicon.ico" />
  </head>
  <body
    class="antialiased bg-neutral-950 text-neutral-200 font-sans selection:bg-neutral-800 selection:text-white"
  >
    <header class="border-b border-white/10">
      <div class="mx-auto max-w-3xl px-6 h-16 flex items-center justify-between">
        <a href="../index.html" class="text-sm text-neutral-300 hover:text-white">← Back to home</a>
        <span class="text-sm text-neutral-400">PS70 Fall 2025</span>
      </div>
    </header>
    <main class="mx-auto max-w-3xl px-6 py-10">
      <article class="prose prose-invert font-sans">
        <h1>Final Project — AirTag‑like Tracker</h1>
        <p>
          Building a privacy‑aware, Find My–compatible tracker in three stages: a Flipper Zero MVP,
          an ESP32 intermediary prototype to validate custom BLE advertising and key rotation, and a
          custom ultra‑low‑power coin‑cell tag based on nRF52 with a 3D‑printed enclosure.
        </p>

        <h2>Stage 2b — “Send My” (ESP32 data modem)</h2>
        <p>
          I will explore the Positive Security “Send My” approach — encoding data into Find My
          rolling keys and retrieving it via Apple’s report API — to evaluate feasibility, latency,
          and throughput for sensor uplink use‑cases. See
          <a href="https://positive.security/blog/send-my" target="_blank" rel="noopener">Send My: Arbitrary data transmission via Apple’s Find My network</a>.
        </p>
        <ul>
          <li>Goal: PoC on ESP32 with reliable bit/byte decode; measure latency and bytes/min.</li>
          <li>Impl: ESP‑IDF/Arduino + NimBLE; index + message IDs; serial CLI to send messages.</li>
          <li>Ethics: upload‑only PoC; document risks/abuse mitigations; use own keys only.</li>
        </ul>
        
        <h3>Use cases</h3>
        <ul>
          <li>Battery‑powered environmental sensors (bytes/minute status)</li>
          <li>Location + tiny telemetry (motion events, battery %, tamper flag)</li>
          <li>Distributed signage/alerts where cellular is unavailable</li>
        </ul>

        <h3>How it works</h3>
        <figure>
          <!-- Inline SVG: Key encoding concept -->
          <svg viewBox="0 0 840 200" width="100%" style="max-width:840px;background:#0a0a0a;border-radius:8px">
            <rect x="10" y="20" width="250" height="160" rx="8" fill="#111" stroke="#444"/>
            <text x="135" y="60" fill="#ddd" text-anchor="middle" font-size="14">Payload bytes</text>
            <text x="135" y="85" fill="#9aa" text-anchor="middle" font-size="12">seq, msgId, data…</text>

            <rect x="300" y="20" width="250" height="160" rx="8" fill="#111" stroke="#444"/>
            <text x="425" y="60" fill="#ddd" text-anchor="middle" font-size="14">Key encoder</text>
            <text x="425" y="85" fill="#9aa" text-anchor="middle" font-size="12">map bytes → rotating pubkeys</text>

            <rect x="590" y="20" width="240" height="160" rx="8" fill="#111" stroke="#444"/>
            <text x="710" y="60" fill="#ddd" text-anchor="middle" font-size="14">BLE advertiser</text>
            <text x="710" y="85" fill="#9aa" text-anchor="middle" font-size="12">broadcasts Find My frames</text>

            <defs>
              <marker id="arrow2" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L6,3 z" fill="#fc6" />
              </marker>
            </defs>
            <line x1="260" y1="100" x2="300" y2="100" stroke="#fc6" stroke-width="2" marker-end="url(#arrow2)"/>
            <line x1="550" y1="100" x2="590" y2="100" stroke="#fc6" stroke-width="2" marker-end="url(#arrow2)"/>
          </svg>
          <figcaption>Bytes are encoded into rotating public keys, then advertised over BLE.</figcaption>
        </figure>

        <h3>Constraints &amp; notes</h3>
        <ul>
          <li>Very low throughput (bytes/minute), bursty, best‑effort delivery</li>
          <li>Opportunistic coverage depends on passerby devices</li>
          <li>Encode redundancy and sequence numbers; sign content you control</li>
        </ul>

        <h3>Safety &amp; ethics</h3>
        <ul>
          <li>Use keys you generated; label devices; document benign telemetry only</li>
          <li>Respect local laws/ToS; research purpose, not for abuse</li>
        </ul>

        <h2>Timeline &amp; Milestones</h2>
        <ul>
          <li><strong>Week 6</strong>: Flipper MVP validated; start ESP32 OpenHaystack adv PoC</li>
          <li><strong>Week 7</strong>: “Send My” ESP32 modem PoC; retrieval + decoding working</li>
          <li><strong>Week 8</strong>: Select nRF52 module; schematic + PCB layout; firmware port skeleton</li>
          <li><strong>Week 9</strong>: Order PCB/parts; implement key rotation + low‑power sleep on nRF52</li>
          <li><strong>Week 10</strong>: PCB assembly; SWD bring‑up; first nRF52 adv seen on iOS</li>
          <li><strong>Week 11</strong>: Current profiling + battery estimate; Enclosure Rev A CAD + print</li>
          <li><strong>Week 12</strong>: Polish: BOM freeze, enclosure Rev B, documentation</li>
        </ul>

        <h3>Exit criteria</h3>
        <ul>
          <li><strong>Flipper MVP</strong>: mapped sightings from a real‑world walk</li>
          <li><strong>ESP32 prototype</strong>: OpenHaystack adv recognized via reports; stable rotation; baseline current</li>
          <li><strong>“Send My” PoC</strong>: reliable upload‑only data transfer demo with measured latency</li>
          <li><strong>Custom HW Rev A</strong>: nRF52 adv detected and keys rotate; ≥24h runtime on CR2032</li>
          <li><strong>Final</strong>: stable adv, enclosure fit, documented build, ethical use statement</li>
        </ul>

        <h2>Bill of Materials (Rev A)</h2>
        <h3>Flipper MVP</h3>
        <ul>
          <li>Flipper Zero + SD card</li>
        </ul>

        <h3>ESP32 Prototype (intermediary)</h3>
        <ul>
          <li>ESP32‑DevKitC or ESP32‑S3 board — 1</li>
          <li>USB cable/power bank or small LiPo — 1</li>
        </ul>

        <h3>Custom Coin‑Cell Tag (nRF52)</h3>
        <ul>
          <li>Raytac MDBT42Q (nRF52832) — 1 (or MDBT50Q nRF52840)</li>
          <li>Keystone 3034 CR2032 holder — 1</li>
          <li>C&amp;K JS102011SAQN slide switch — 1</li>
          <li>LIS3DH (optional) + 0.1&nbsp;µF/1&nbsp;µF caps — 1</li>
          <li>0603 passives — assorted</li>
          <li>PCB 2‑layer, 1.6&nbsp;mm FR‑4 — 5 (min order)</li>
          <li>3D printed enclosure (PETG/ABS) — 1 set</li>
          <li>Tools (one‑time): Tag‑Connect cable; J‑Link EDU Mini/CMSIS‑DAP; CR2032 cells</li>
        </ul>

        <h2>3D Model Deliverables</h2>
        <ul>
          <li><code>cad/airtag-body.step</code></li>
          <li><code>cad/airtag-top.stl</code>, <code>cad/airtag-bottom.stl</code></li>
          <li><code>cad/exploded.png</code> (exploded view)</li>
        </ul>

        <h2>References</h2>
        <p>
          FindMyFlipper — app + key generation + report tooling:
          <a href="https://github.com/MatthewKuKanich/FindMyFlipper" target="_blank" rel="noopener">github.com/MatthewKuKanich/FindMyFlipper</a>
        </p>
        <p>
          Positive Security “Send My” — data over Find My analysis + PoC:
          <a href="https://positive.security/blog/send-my" target="_blank" rel="noopener">positive.security/blog/send-my</a>
        </p>
      </article>
      <nav class="mt-12 flex justify-between text-sm text-neutral-400">
        <a class="hover:text-white" href="../10_machine/index.html">← Prev</a>
        <a class="hover:text-white" href="../index.html">Home</a>
      </nav>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        if (window.hljs) {
          hljs.highlightAll();
        }
      });
    </script>
  </body>
</html>

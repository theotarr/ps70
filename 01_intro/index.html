<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PS70 — Week 1: Intro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link href="../dist/output.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark-dimmed.min.css"
    />
    <link rel="icon" href="../favicon.ico" />
  </head>
  <body
    class="antialiased bg-neutral-950 text-neutral-200 font-sans selection:bg-neutral-800 selection:text-white"
  >
    <header class="border-b border-white/10">
      <div class="mx-auto max-w-3xl px-6 h-16 flex items-center justify-between">
        <a href="../index.html" class="text-sm text-neutral-300 hover:text-white">← Back to home</a>
        <span class="text-sm text-neutral-400">PS70 Fall 2025</span>
      </div>
    </header>
    <main class="mx-auto max-w-3xl px-6 py-10">
      <article class="prose prose-invert font-sans">
        <h2>Week 1: Final Project Brainstorm</h2>
        <p>
          Here are some ideas I'm thinking about for my final project. Since I'm quite comfortable
          with coding, I think I could make the coolest thing in the shortest amount of time by
          augmenting a piece of software into the real world. Or bridging real world data into code.
        </p>
        <p>
          For example, I've been personally interested in using biometric data. Recently, I
          experimented with some ideas I had for biofeedback devices to lower heart rate and
          increase heart rate variability (HRV) with real-time data from my
          <a href="https://www.whoop.com/" target="_blank" rel="noopener">Whoop</a> band. To do
          this, I reverse engineered the Bluetooth Low Energy (BLE) protocol and wrote a simple
          React Native/Expo app to read the data from the band. I'm still really interested in
          continuing to experiment with this idea, and I want my PS70 project to be a continuation
          of that curiosity.
        </p>

        <h3>Idea 1: The Intelligent Pillow</h3>
        <p>
          After some research, I came across the idea of an
          <a
            href="https://www.researchgate.net/publication/264622988_Intelligent_Pillow_for_Heart_Rate_Monitor"
            target="_blank"
            rel="noopener"
          >
            intelligent pillow</a
          >
          — a pillow embedded with fiber-optic sensors capable of detecting heart rate
          non-invasively while someone sleeps. This concept really captured my imagination.
        </p>
        <figure>
          <img
            src="./thumb.jpg"
            alt="Thumbnail sketch or concept for the intelligent pillow"
          />
          <figcaption>AI generated concept for the intelligent pillow project.</figcaption>
        </figure>

        <figure>
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/8/85/Fiber_optic_illuminated.jpg"
            alt="Macro photo of fiber optic cable"
          />
          <figcaption>
            Fiber optic cables can act as non-electrical sensors inside a pillow (Wikimedia
            Commons).
          </figcaption>
        </figure>

        <p>
          The main reason I find this idea compelling is the <strong>use case</strong>. Unlike
          wearable devices (wristbands, chest straps, rings), a pillow is
          <em>already part of the sleep routine</em>. That means data can be collected passively
          without extra effort from the user, which solves one of the biggest friction points in
          biometric tracking: consistency.
        </p>

        <h4>How It Works</h4>
        <ul>
          <li>A fiber-optic sensor (IR LED + photodiode) is embedded inside the pillow.</li>
          <li>
            The sensor detects tiny changes in reflected light as blood pulses through vessels — a
            signal known as PPG (photoplethysmography).
          </li>
          <li>
            A microcontroller filters and amplifies the signal, counts peaks, and calculates heart
            rate.
          </li>
          <li>
            Data could be displayed on an OLED screen or transmitted wirelessly to a phone or
            computer.
          </li>
        </ul>

        <figure>
          <img
            src="https://commons.wikimedia.org/wiki/Special:FilePath/Photoplethysmogram%20%28PPG%29%20pulse%20wave.svg"
            alt="Diagram of a PPG pulse wave with systolic peak and dicrotic notch"
          />
          <figcaption>Representative PPG pulse wave (CC BY 4.0, Wikimedia Commons).</figcaption>
        </figure>

        <figure>
          <img
            src="https://commons.wikimedia.org/wiki/Special:FilePath/Photoplethysmogram%20signals%20at%20rest%20and%20during%20exercise.svg"
            alt="Comparison of PPG signals at rest and during exercise"
          />
          <figcaption>
            PPG changes with movement/physiology — useful context for sensor testing (CC BY 4.0,
            Wikimedia Commons).
          </figcaption>
        </figure>

        <h4>Why This Idea Fits PS70</h4>
        <p>The project naturally touches all three technical pillars of the course:</p>
        <ol>
          <li>
            <strong>3D Design &amp; Fabrication</strong> — I’ll prototype the pillow insert, sensor
            housing, and possibly a bedside enclosure for the electronics.
          </li>
          <li>
            <strong>Electronics (Input &amp; Output)</strong> — The IR LED + photodiode sensor,
            filters, amplifiers, and microcontroller inputs/outputs (screen, LEDs, or Wi-Fi).
          </li>
          <li>
            <strong>Microcontroller Programming</strong> — Arduino/ESP32 code to read signals,
            filter noise, calculate BPM, and display/log the data.
          </li>
        </ol>

        <h4>Future Extensions</h4>
        <p>If the prototype works, there are many possible extensions such as:</p>
        <ul>
          <li><strong>Sleep staging</strong> by analyzing heart rate trends overnight.</li>
          <li>
            Stream/log data wirelessly to an external application for visualization/analysis or data
            storage.
          </li>
        </ul>
        <hr />
        <h3>Idea 2: AirTag‑like Tracker</h3>
        <p>
          I’m building my own “AirTag”-like tracker that leverages existing crowdsourced networks,
          starting with Apple’s Find My via OpenHaystack. I’ll ship a quick MVP on a Flipper Zero,
          validate custom BLE advertising on an ESP32 prototype, then design a coin‑cell, ultra‑low
          power BLE tag I can 3D print an enclosure for and carry on a keychain.
        </p>

        <h4>Why this is interesting</h4>
        <ul>
          <li>Real‑world, privacy‑sensitive wireless systems (BLE, network relays, encryption).</li>
          <li>Bridges multiple course pillars: electronics, embedded firmware, 3D design.</li>
          <li>Clear success criteria: sightings on a map and multi‑day battery life.</li>
        </ul>

        <h4>System overview</h4>
        <ul>
          <li>Device advertises encrypted BLE payloads from rotating public keys.</li>
          <li>Nearby iOS devices upload sightings to Apple’s servers.</li>
          <li>I fetch and decrypt reports locally to visualize locations.</li>
        </ul>
        
        <h4>Find My as a BLE-to-Internet uplink ("Send My")</h4>
        <p>
          Based on Positive Security’s analysis, small payloads can be encoded into the
          rotating public keys that Find My devices advertise. Nearby iOS devices relay
          these beacons to Apple’s network. With the corresponding private keys, a client
          can recover the payload, effectively giving a low‑bandwidth sensor uplink.
          See: <a href="https://positive.security/blog/send-my" target="_blank" rel="noopener">analysis</a>.
        </p>
        <h5>Use cases</h5>
        <ul>
          <li>Remote sensors (weather, flood, freezer temp, door/window state)</li>
          <li>Asset trackers with telemetry (battery %, motion events)</li>
          <li>Disaster/low‑infrastructure status beacons (power on/off, SOS)</li>
          <li>Agriculture and building monitoring where Wi‑Fi/cellular is impractical</li>
        </ul>
        <figure>
          <!-- Inline SVG: BLE → iPhone → Find My → Decoder -->
          <svg viewBox="0 0 820 140" width="100%" style="max-width:820px;background:#0a0a0a" class="rounded-lg">
            <!-- boxes -->
            <rect x="10" y="20" width="180" height="100" rx="8" fill="#111" stroke="#444"/>
            <text x="100" y="55" fill="#ddd" text-anchor="middle" font-size="14">Sensor MCU</text>
            <text x="100" y="78" fill="#9aa" text-anchor="middle" font-size="12">BLE Adv + encoded key</text>

            <rect x="220" y="20" width="180" height="100" rx="8" fill="#111" stroke="#444"/>
            <text x="310" y="55" fill="#ddd" text-anchor="middle" font-size="14">Nearby iPhone</text>
            <text x="310" y="78" fill="#9aa" text-anchor="middle" font-size="12">Relays Find My reports</text>

            <rect x="430" y="20" width="180" height="100" rx="8" fill="#111" stroke="#444"/>
            <text x="520" y="55" fill="#ddd" text-anchor="middle" font-size="14">Apple Network</text>
            <text x="520" y="78" fill="#9aa" text-anchor="middle" font-size="12">Stores encrypted sightings</text>

            <rect x="640" y="20" width="170" height="100" rx="8" fill="#111" stroke="#444"/>
            <text x="725" y="55" fill="#ddd" text-anchor="middle" font-size="14">Decoder</text>
            <text x="725" y="78" fill="#9aa" text-anchor="middle" font-size="12">Private keys → payload</text>

            <!-- arrows -->
            <defs>
              <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L6,3 z" fill="#6cf" />
              </marker>
            </defs>
            <line x1="190" y1="70" x2="220" y2="70" stroke="#6cf" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="400" y1="70" x2="430" y2="70" stroke="#6cf" stroke-width="2" marker-end="url(#arrow)"/>
            <line x1="610" y1="70" x2="640" y2="70" stroke="#6cf" stroke-width="2" marker-end="url(#arrow)"/>
          </svg>
          <figcaption>BLE payload piggybacks on Find My. iPhones provide the backhaul.</figcaption>
        </figure>

        <h4>Execution plan (stages)</h4>
        <ol>
          <li>
            <strong>Flipper Zero MVP</strong> — Use the FindMyFlipper app to generate keys, import a
            <code>.keys</code> file, broadcast, and retrieve location reports. Tune beacon interval
            and TX power, then run a campus walk to validate.
          </li>
          <li>
            <strong>ESP32 prototype</strong> — Build custom firmware that emits OpenHaystack‑style
            advertisements and rotates keys. Provide a serial CLI to inject keys and tweak params.
            Validate the end‑to‑end pipeline on iOS.
          </li>
          <li>
            <strong>Custom coin‑cell tag (nRF52)</strong> — Port the logic to an ultra‑low‑power
            MCU (nRF52), add deep sleep and optional motion‑gated advertising, and design a thin
            snap‑fit enclosure with a keyring slot.
          </li>
        </ol>

        <h4>Initial BOM (Rev&nbsp;A, indicative)</h4>
        <ul>
          <li>Flipper MVP: Flipper Zero + SD card (existing).</li>
          <li>ESP32 prototype: ESP32‑DevKitC or ESP32‑S3 board; USB power/LiPo.</li>
          <li>Custom tag: Raytac MDBT42Q (nRF52832) or MDBT50Q (nRF52840), CR2032 holder (Keystone 3034), slide switch, LIS3DH (optional), 0603 passives, 2‑layer PCB, 3D printed enclosure.</li>
        </ul>

        <h4>Risks &amp; mitigations</h4>
        <ul>
          <li>
            <strong>Platform changes</strong>: Keep key generation/report tooling modular (Anisette
            server; OpenHaystack‑style keys) so I can swap tools if needed.
          </li>
          <li>
            <strong>Battery life</strong>: Choose nRF52 for low power; add motion‑gated advertising;
            measure current early and often.
          </li>
          <li>
            <strong>Ethics/compliance</strong>: Use my own generated keys (no cloning), label the
            device, and include an owner‑alert chirp option.
          </li>
        </ul>

        <h4>References</h4>
        <p>
          I’m using the excellent FindMyFlipper project to bootstrap the MVP, including key
          generation and report retrieval:
          <a href="https://github.com/MatthewKuKanich/FindMyFlipper" target="_blank" rel="noopener">github.com/MatthewKuKanich/FindMyFlipper</a>.
        </p>
      </article>
      <nav class="mt-12 flex justify-between text-sm text-neutral-400">
        <a class="hover:text-white" href="../index.html">Home</a>
        <a class="hover:text-white" href="../02_2Ddesign/index.html">Next →</a>
      </nav>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/cpp.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        if (window.hljs) {
          hljs.highlightAll();
        }
      });
    </script>
  </body>
</html>
